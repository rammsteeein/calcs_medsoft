package com.example.demo1.controls.ECOG;

public class ECOGCalculator {

    /**
     * Шкала ECOG (0–5 баллов)
     *
     * 0 — Пациент полностью активен, способен выполнять все, как и до заболевания
     * 1 — Неспособен выполнять тяжёлую, но может выполнять лёгкую или сидячую работу
     * 2 — Лечится амбулаторно, способен к самообслуживанию, но не может выполнять работу,
     *      более 50% времени бодрствования проводит активно, в вертикальном положении
     * 3 — Ограниченное самообслуживание, более 50% времени бодрствования в кресле/постели
     * 4 — Совершенно не способен к самообслуживанию, прикован к креслу/постели
     * 5 — Смерть
     */
    public static ECOGResult calc(Integer score) {
        if (score == null) {
            return new ECOGResult(-1, "Выберите балл по шкале ECOG");
        }
        if (score < 0 || score > 5) {
            return new ECOGResult(score, "Некорректное значение ECOG");
        }

        String interpretation = interpret(score);
        return new ECOGResult(score, interpretation);
    }

    private static String interpret(int score) {
        switch (score) {
            case 0:
                return "Полностью активен, работает как до заболевания\n" +
                        "(90–100% по шкале Карновского)";
            case 1:
                return "Не выполняет тяжёлую работу, возможна лёгкая/сидячая работа\n" +
                        "(70 - 80% по шкале Карновского)";
            case 2:
                return "Амбулаторно, способен к самообслуживанию, не работает, >50% времени активен\n" +
                        "(50 - 60% по шкале Карновского)";
            case 3:
                return "Ограниченное самообслуживание, >50% времени в кресле или постели\n" +
                        "(30 - 40% по шкале Карновского)";
            case 4:
                return "Совершенно не способен к самообслуживанию, прикован к постели/креслу\n" +
                        "(10 - 20% по шкале Карновского)";
            case 5:
                return "Смерть";
            default:
                return "Неизвестное значение ECOG";
        }
    }
}


