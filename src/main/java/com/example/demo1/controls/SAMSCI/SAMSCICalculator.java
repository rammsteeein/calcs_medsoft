package com.example.demo1.controls.SAMSCI;

public class SAMSCICalculator {

    /**
     * Шкала SAMS-CI (Statin-Associated Muscle Symptoms – Clinical Index)
     * для оценки вероятности статин-индуцированной миалгии.
     *
     * Факторы и начисление баллов:
     *
     * 1. Локализация и характер боли:
     *    - Симметричная боль в мышцах бедер: 3 балла
     *    - Симметричная боль в икроножных мышцах: 2 балла
     *    - Симметричная боль в проксимальных мышцах верхних конечностей: 2 балла
     *    - Неспецифическая асимметричная боль в мышцах: 1 балл
     *
     * 2. Время появления симптомов:
     *    - <4 недель после начала терапии: 3 балла
     *    - 4–12 недель: 2 балла
     *    - >12 недель: 1 балл
     *
     * 3. Ответ на отмену статинов:
     *    - Уменьшение симптомов в течение 2 недель: 2 балла
     *    - Уменьшение симптомов в течение 2–4 недель: 1 балл
     *    - Симптомы сохраняются >4 недель: 0 баллов
     *
     * 4. Повторное назначение статинов:
     *    - Симптомы появляются снова <4 недель: 3 балла
     *    - Симптомы появляются снова через 4–12 недель: 1 балл
     *
     * Интерпретация суммарного балла:
     * - 9–11 баллов: достоверная статин-индуцированная миалгия
     * - 7–8 баллов: возможная статин-индуцированная миалгия
     * - <7 баллов: маловероятна связь симптомов со статинами
     *
     * Примечания:
     * - Шкала помогает оценить вероятность того, что мышечные боли связаны именно со статинами.
     * - Используется в клинической практике для выбора дальнейшей тактики лечения и коррекции терапии.
     */

    public static SAMSCIResult calc(
            int muscleLocation,
            int symptomTiming,
            int statinDiscontinuation,
            int statinRechallenge
    ) {
        int score = muscleLocation + symptomTiming + statinDiscontinuation + statinRechallenge;

        String likelihood = "";
        if (score >= 9 && score <= 11) likelihood = "Достоверный";
        else if (score >= 7 && score <= 8) likelihood = "Возможен";
        else if (score < 7) likelihood = "Маловероятный";

        String resultStr = String.format("Сумма баллов: %d\nКлинический индекс: %s", score, likelihood);

        return new SAMSCIResult(resultStr);
    }
}