package com.example.demo1.controls.RCRI;

public class RCRICalculator {

    /**
     * Расчет индекса кардиологического риска RCRI (Revised Cardiac Risk Index)
     *
     * Критерии начисления баллов (каждое "да" = 1 балл, "нет" = 0 баллов):
     * 1. Хирургия повышенного риска:
     *    - Внутрибрюшная, внутригрудная, супраингвинальная операция
     * 2. Анамнез ишемической болезни сердца:
     *    - Перенесенный инфаркт миокарда, положительный нагрузочный тест в анамнезе
     *    - Боль в груди, связанная с ишемией миокарда
     *    - Прием нитратов или патологические зубцы Q на ЭКГ
     * 3. Застойная сердечная недостаточность в анамнезе:
     *    - Отек легких, двусторонние хрипы, ритм галопа S3
     *    - Пароксизмальная ночная одышка
     *    - Рентгенологические признаки перераспределения легочного рисунка
     * 4. Анамнез цереброваскулярных заболеваний:
     *    - ТИА или инсульт в анамнезе
     * 5. Предоперационное лечение инсулином
     * 6. Предоперационный уровень креатинина >176,8 мкмоль/л
     *
     * Интерпретация суммарного балла:
     * - 0 баллов: риск большого кардиального события 3,9% (2,8-5,4%)
     * - 1 балл: риск 6,0% (4,9-7,4%)
     * - 2 балла: риск 10,1% (8,1-12,6%)
     * - 3 и более баллов: риск 15% (11,1-20,0%)
     *
     * Примечания:
     * - Каждое условие оценивается: да/нет.
     * - Итоговый балл суммируется, что позволяет классифицировать пациента по риску.
     * - Шкала RCRI используется для оценки риска сердечно-сосудистых осложнений перед несердечной операцией.
     */

    public static RCRIResult calc(
            boolean highRiskSurgery,
            boolean ischemicHeartDisease,
            boolean heartFailure,
            boolean cerebrovascularDisease,
            boolean insulinTreatment,
            boolean highCreatinine
    ) {
        int score = 0;
        if (highRiskSurgery) score++;
        if (ischemicHeartDisease) score++;
        if (heartFailure) score++;
        if (cerebrovascularDisease) score++;
        if (insulinTreatment) score++;
        if (highCreatinine) score++;

        String interpretation;
        switch (score) {
            case 0 -> interpretation = "Риск большого кардиального события: 3,9% (2,8-5,4%)";
            case 1 -> interpretation = "Риск большого кардиального события: 6,0% (4,9-7,4%)";
            case 2 -> interpretation = "Риск большого кардиального события: 10,1% (8,1-12,6%)";
            default -> interpretation = "Риск большого кардиального события: 15% (11,1-20,0%)";
        }

        return new RCRIResult(score, interpretation);
    }
}